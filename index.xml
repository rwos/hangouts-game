<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs title="Shootout">
        <Require feature="rpc" />
        <Require feature="views" />
        <Require feature="locked-domain" />
    </ModulePrefs>
    <Content type="html"><![CDATA[
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><script src="//plus.google.com/hangouts/_/api/v1/hangout.js"></script><style type="text/css">body{padding:0;margin:0;margin-left:600px;font-family:sans-serif;font-size:20px}#highscore{background:rgba(255,255,255,.5);table-layout:fixed;width:100%}#highscore .place{width:2em}#highscore .name{width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#highscore .points{text-align:right;white-space:nowrap;overflow:hidden;text-overflow:'Â«'}#main,body,html{width:100%;height:100%}#version,#version *{font-size:small;color:#aaa;text-align:right;position:absolute;right:2px;bottom:0}</style></head><body><table id="highscore"><tr><td class="place">1.</td><td class="name">Someone</td><td class="points">231</td></tr><tr><td class="place">2.</td><td class="name">Someone with a really long name</td><td class="points">231</td></tr><tr><td class="place">3.</td><td class="name">Someone with a really long name</td><td class="points">231232132131</td></tr></table><canvas id="main"></canvas><div id="version"><a href="https://github.com/rwos/hangouts-game">v21.0</a></div><script>function rand(n,e){return Math.floor(Math.random()*(e-n))+n}function randommappoint(){return[rand(0,MAPW),rand(0,MAPH)]}function game_init(){ENEMIES=[],MAP=[];var n,e;for(n=0;MAPW>n;n++)MAP.push(new Array(MAPH));for(n=0;MAPW*MAPH/MAPFILL>n;n++)e=randommappoint(),MAP[e[0]][e[1]]="X"}function game_mapdebug(n,e,i){n.fillStyle="green";for(var t=e/MAPW,o=i/MAPH,a=0;MAPW>a;a++)for(var r=0;MAPW>r;r++)"X"===MAP[a][r]&&n.fillRect(a*t,r*o,t,o)}function game_renderhighscores(n){}function game_render(n,e,i){game_mapdebug(n,e,i)}function mainloop(){var n=document.getElementById("main");n.width=n.scrollWidth,n.height=n.scrollHeight,game_render(n.getContext("2d"),n.width,n.height),requestAnimFrame(function(){mainloop()})}function init(){gapi.hangout.onApiReady.add(function(n){if(n.isApiReady)try{var e=gapi.hangout.layout.getVideoCanvas();e.setWidth(600),e.setPosition(0,0),e.setVisible(!0),game_init(),mainloop()}catch(i){console.log("INIT ERROR"),console.log(i)}})}var MAPW=200,MAPH=200,MAPFILL=10,ENEMIES=[],MAP=[];window.requestAnimFrame=function(n){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){console.log("ANIMATION FRAME FALLBACK"),window.setTimeout(n,1e3/30)}}(),"undefined"==typeof gadgets&&(console.log("LOCAL VERSION"),gapi={hangout:{onApiReady:{add:function(n){n({isApiReady:!0})}},layout:{getVideoCanvas:function(){return{setWidth:function(){},setPosition:function(){},setVisible:function(){}}}}}},gadgets={util:{registerOnLoadHandler:function(n){n()}}}),gadgets.util.registerOnLoadHandler(init);</script></body></html>    ]]></Content>
</Module>
